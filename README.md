[![Build Status](https://travis-ci.org/auth0/express-openid-jwt.svg?branch=master)](https://travis-ci.org/auth0/express-openid-jwt)


This library provides an authentication middleware for express.js that validate tokens generated by an OpenID Connect authorization server.

In a sense, this library can do the same than [express-jwt](https://github.com/auth0/express-jwt) but requires less configuration.

## Installation

```
npm i express-openid-jwt --save
```

## Basic Usage

```javascript
const jwt = require('express-openid-jwt');

app.use(jwt({
  issuerBaseURL: 'https://foobar.auth0.com',
  allowedAudiences: 'https://api.mysite.com'
}));

app.get('/test', (req, res) => {
  console.dir(req.openid.claims);
  res.sendStatus(200);
});
```

## Parameters

| Name                | Default                         | Description                                                                    |
|---------------------|---------------------------------|--------------------------------------------------------------------------------|
| issuerBaseURL       | `env.ISSUER_BASE_URL`           | The url address for the token issuer.                                          |
| allowedAudiences    | `env.ALLOWED_AUDIENCES.split(',')`       | The allowed audiences for the token.                                           |
| getToken            | `headers.authoization.match(/^Bearer\s(.*)$/)[1]`       | Specifies how to get the token from the request. |
| clockTolerance      | `5`                             | The clock's tolerance in seconds for token verification.                       |
| clientSecret        | `env.CLIENT_SECRET`             | The client secret, only required if you need to validate tokens signed with symmetric algorithms. |


## License

MIT 2018 - Auth0 Inc.
